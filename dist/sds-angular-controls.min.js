/* 
 * 
 * sds-angular-controls - Angular Directives used with sds-angular generator 
 * Version 0.2.31 
 * 
 * Copyright (c) 2015 Steve Gentile, David Benson 
 * Examples and docs at: https://github.com/SMARTDATASYSTEMSLLC/sds-angular-controls 
 * Licensed under MIT 
 *  
 */

angular.module("sds-angular-controls",["ui.bootstrap","toggle-switch","ngSanitize","selectize-ng"]),function(){"use strict";function a(){return function(a){return a.toLowerCase().replace(/ (\w)/g,function(a,b){return b.toUpperCase()})}}angular.module("sds-angular-controls").filter("camelCase",a)}(),function(){"use strict";function a(a){return function(b,c){if("string"==typeof c)return a("filter")(b,c);var d=function(a,b){for(var c=b.split(".");c.length&&(a=a[c.shift()]););return a},e=[];return _.each(c,function(a){if("date"===a.type&&a.filter){var b=a.filter.split("-"),c=moment(b[0]),d=moment(b[1]||c.clone().endOf("day"));c.isValid()&&d.isValid()&&e.push({filter:[c.valueOf(),d.valueOf()],key:a.key,type:a.type})}else if("number"===a.type&&a.filter){var f=a.filter.split("-");!f[0]&&f[1]&&(f.slice(0,1),f[0]*=-1),!f[1]&&f[2]&&(f.slice(1,1),f[1]*=-1);var g=parseFloat(f[0]),h=parseFloat(f[1]||f[0]);e.push({filter:[g,h],key:a.key,type:a.type})}else"string"==typeof a.filter&&e.push({filter:a.filter.toLowerCase(),key:a.key})}),_.filter(b,function(a){return _.all(e,function(b){if(!b.filter||!b.key)return!0;if(!b.type)return(d(a,b.key)+"").toLowerCase().indexOf(b.filter)>-1;if("date"===b.type){var c=moment(d(a,b.key)).valueOf();return c>=b.filter[0]&&c<=b.filter[1]}return"number"===b.type?d(a,b.key)>=b.filter[0]&&d(a,b.key)<=b.filter[1]:void 0})})}}a.$inject=["$filter"],angular.module("sds-angular-controls").filter("complexFilter",a)}(),function(){"use strict";function a(){return function(a,b){var c={};return angular.forEach(a,function(a,d){d!==b&&(c[d]=a)}),c}}angular.module("sds-angular-controls").filter("keyFilter",a)}(),function(){"use strict";function a(){return function(a){return(null===a||void 0===a||""===a)&&(a=" "),a=(a+"").replace(/([A-Z])/g," $1"),a[0].toUpperCase()+a.slice(1)}}angular.module("sds-angular-controls").filter("labelCase",a)}(),function(){"use strict";function a(){var a=["th","st","nd","rd"];return function(b){var c=b%100;return b+(a[(c-20)%10]||a[c]||a[0])}}angular.module("sds-angular-controls").filter("ordinal",a)}(),function(){"use strict";function a(){return function(a,b,c){return a&&a.length?(b=parseInt(b||0,10)||0,c=parseInt(c||0,10),c||(c=25),a.slice(b*c,(b+1)*c)):[]}}angular.module("sds-angular-controls").filter("page",a)}(),function(){"use strict";function a(a){return a.trustAsHtml}a.$inject=["$sce"],angular.module("sds-angular-controls").filter("unsafe",a)}(),function(){"use strict";function a(){var a={};return{require:"?ngModel",restrict:"A",compile:function(b,c){var d=b.is("input:text");return function(b,e,f,g){var h=angular.extend({},a,b.$eval(f.autoNumeric)),i=function(a,b){$.isNumeric(b)&&a.autoNumeric("set",b)};e.autoNumeric(h),g&&d?(b.$watch(c.ngModel,function(){g.$render()}),g.$render=function(){i(e,g.$viewValue)},e.on("change",function(){b.$apply(function(){g.$setViewValue(e.autoNumeric("get"))})})):d&&f.$observe("value",function(a){i(e,a)})}}}}angular.module("sds-angular-controls").directive("autoNumeric",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{items:"=",groups:"=?",itemKey:"@?",itemValue:"@?",itemGroupKey:"@?",itemGroupValue:"@?",log:"@?",allowCustom:"=?",style:"@?",layoutCss:"@?",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-autocomplete.html",link:function(a,b){var c=b.parent().scope();switch(c.$watch("record",function(b){a.record=b}),c.$watch("field",function(b){a.field=b}),c.$watch("isRequired",function(b){a.isRequired=b}),c.$watch("layout",function(b){a.layout=b}),c.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.layout){case"horizontal":a.layoutCss=a.layoutCss||"col-md-6";break;default:a.layoutCss=a.layoutCss||"col-md-4"}var d={valueField:a.itemKey,labelField:a.itemValue,searchField:[a.itemValue],maxOptions:10};a.allowCustom&&(d.persist=!1,d.create=!0),a.itemGroupKey&&_.isArray(a.groups)&&(d.optgroups=a.groups,d.optgroupField=a.itemGroupKey,d.optgroupValueField=a.itemGroupKey,d.optgroupLabelField=a.itemGroupValue),a.options=d}}}a.$inject=["$filter","$rootScope","$timeout"],angular.module("sds-angular-controls").directive("formAutocomplete",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{dateFormat:"@",log:"@?",style:"@?",max:"=?",min:"=?",layoutCss:"@?",isReadonly:"=?",disableTimepicker:"=?"},templateUrl:"sds-angular-controls/form-directives/form-datepicker.html",link:function(a,b){var c=b.parent().scope();switch(c.$watch("record",function(b){a.record=b}),c.$watch("field",function(b){a.field=b}),a.$watch("record[field]",function(b){"string"==typeof b&&(a.record[a.field]=moment(a.record[a.field]).toDate())}),c.$watch("isRequired",function(b){a.isRequired=b}),c.$watch("layout",function(b){a.layout=b}),c.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.disableTimepicker=a.disableTimepicker||!1,a.dateFormat=a.dateFormat||"MM-dd-yyyy",a.calendar={opened:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.calendar.opened=!0},a.layout){case"horizontal":a.layoutCss=a.layoutCss||"col-md-6";break;default:a.layoutCss=a.layoutCss||"col-md-4"}}}}function b(){return{restrict:"EAC",require:"ngModel",link:function(a,b,c,d){d.$formatters.shift()}}}a.$inject=["$filter","$rootScope"],angular.module("sds-angular-controls").directive("formDatePicker",a).directive("datepickerPopup",b)}(),function(){"use strict";function a(a,b){return{restrict:"EA",transclude:!0,replace:!0,scope:{record:"=",isRequired:"=?",isReadonly:"=?",field:"@",label:"@",rowClass:"@?",layout:"@?",labelCss:"@?",layoutCss:"@?",showLabel:"=?",errorLayoutCss:"@?",hideValidationMessage:"=?",validationFieldName:"@?"},templateUrl:"sds-angular-controls/form-directives/form-field.html",require:"^form",link:function(c,d,e,f){c.showDefault=!1,b(function(){0===$(d).find("ng-transclude *").length&&(c.showDefault=!0)},0),c.layout=c.layout||"stacked",c.label||(c.label=a("labelCase")(c.field)),c.validationFieldName=c.validationFieldName||a("labelCase")(c.label),c.$watch("record",function(a){a&&(c.record=a)}),c.showLabel=c.showLabel!==!1,c.hideValidationMessage=c.hideValidationMessage||!1,c.layoutCss=c.layoutCss||"col-md-12",c.errorLayoutCss=c.errorLayoutCss||"col-md-12","horizontal"===c.layout&&(c.labelCss=c.labelCss||"col-md-4"),c.showError=function(a){try{return f.$submitted?a.$invalid:d.find("[name="+a.$name+"]:focus").length?!1:a.$dirty&&a.$invalid}catch(b){return!1}}}}}a.$inject=["$filter","$timeout"],angular.module("sds-angular-controls").directive("formField",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,scope:{log:"@?",placeholder:"@?",mask:"@?",style:"@?",max:"@?",min:"@?",type:"@",layoutCss:"@?",inputLayout:"@?",rightLabel:"@?",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-input.html",link:function(a,b,c){var d=b.parent().scope();if(d.$watch("record",function(b){a.record=b}),d.$watch("field",function(b){a.field=b}),d.$watch("isRequired",function(b){a.isRequired=b}),d.$watch("layout",function(b){switch(a.layout=b,a.layout){case"horizontal":a.inputLayout=a.inputLayout||"col-md-6";break;default:a.inputLayout=a.inputLayout||"col-md-4"}}),d.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1,d.$watch("label",function(b){a.label=b,a.placeholder=a.placeholder||b}),a.log=a.log||!1,a.type=a.type||"text","integer"===a.type){var e=b.find(".inputField");$(e).on("keyup",function(){e.val(e.val().replace(/[^0-9]/g,""))})}a.min=d.min,a.max=d.max,a.step=c.step||"any",a.pattern=c.pattern}}}a.$inject=["$filter"],angular.module("sds-angular-controls").directive("formInput",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{log:"@?",placeholder:"@?",style:"@?",layoutCss:"@?",rightLabel:"@?",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-numeric-input.html",link:function(a,b){function c(){a.isReadonly&&"toggle"===a.fieldType&&(a.readOnlyModel=a.record[a.field])}var d=b.parent().scope();switch(d.$watch("record",function(b){a.record=b}),d.$watch("field",function(b){a.field=b}),d.$watch("isRequired",function(b){a.isRequired=b}),d.$watch("layout",function(b){a.layout=b}),d.$watch("label",function(b){a.label=b,a.placeholder=a.placeholder||b}),d.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.layout){case"horizontal":a.layoutCss=a.layoutCss||"col-md-6";break;default:a.layoutCss=a.layoutCss||"col-md-4"}a.$watch("isReadonly",function(a,b){a&&b&&a!==b&&c()})}}}a.$inject=["$filter"],angular.module("sds-angular-controls").directive("formNumericInput",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{items:"=",itemKey:"@?",itemValue:"@?",log:"@?",style:"@?",layoutCss:"@?"},templateUrl:"sds-angular-controls/form-directives/form-select.html",link:function(a,b){function c(a,b,c){var d=function(){};return d.prototype.orderedKeys=[],_.reduce(a,function(a,d){return a[d[b]]=d[c],a.orderedKeys.push(d[b]),a},new d)}var d=b.parent().scope();switch(d.$watch("record",function(b){a.record=b}),d.$watch("field",function(b){a.field=b}),d.$watch("isRequired",function(b){a.isRequired=b}),d.$watch("layout",function(b){a.layout=b}),d.$watch("isReadonly",function(b){if(a.isReadonly=b,a.isReadonly&&a.record&&a.record[a.field]){var c=a.items[a.record[a.field]];a.readOnlyModel=c}}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.layout){case"horizontal":a.layoutCss=a.layoutCss||"col-md-6";break;default:a.layoutCss=a.layoutCss||"col-md-4"}a.orderHash=function(a){return a?a.orderedKeys||Object.keys(a):[]},a.convertType=function(b){return a.record&&a.record[a.field]&&"string"==typeof a.record[a.field]?b.toString():b&&!isNaN(b)?parseInt(b,10):b},a.$watch("items",function(){a.items&&_.isArray(a.items)&&a.itemKey&&a.itemValue&&(a.items=c(a.items,a.itemKey,a.itemValue))})}}}a.$inject=["$filter","$rootScope"],angular.module("sds-angular-controls").directive("formSelect",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{log:"@?",style:"@?",layoutCss:"@?",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-text-area.html",link:function(a,b){function c(){a.isReadonly&&"toggle"===a.fieldType&&(a.readOnlyModel=a.record[a.field])}var d=b.parent().scope();d.$watch("record",function(b){a.record=b}),d.$watch("field",function(b){a.field=b}),d.$watch("isRequired",function(b){a.isRequired=b}),d.$watch("layout",function(b){a.layout=b}),d.$watch("label",function(b){a.label=b,a.placeholder=a.placeholder||b}),d.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.type=a.type||"text",a.layoutCss=a.layoutCss||"col-md-6",a.$watch("isReadonly",function(a,b){a&&b&&a!==b&&c()})}}}angular.module("sds-angular-controls").directive("formTextArea",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{placeholder:"@?",toggleField:"@?",toggleSwitchType:"@?",onLabel:"@?",offLabel:"@?",style:"@?",type:"@",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-text-toggle.html",link:function(a,b){function c(){a.isReadonly&&"toggle"===a.fieldType&&(a.readOnlyModel=a.record[a.field])}var d=b.parent().scope();d.$watch("record",function(b){a.record=b}),d.$watch("field",function(b){a.field=b}),d.$watch("isRequired",function(b){a.isRequired=b}),a.$watch("isReadonly",function(b,d){a.isReadonly=b,b!==d&&c()}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.type=a.type||"text",a.toggleSwitchType=a.toggleSwitchType||"primary",a.onLabel=a.onLabel||"Yes",a.offLabel=a.offLabel||"No"}}}a.$inject=["$filter"],angular.module("sds-angular-controls").directive("formTextToggle",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,scope:{layoutCss:"@?",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-time-picker.html",link:function(a,b){var c=b.parent().scope();c.$watch("record",function(b){a.record=b}),c.$watch("field",function(b){a.field=b}),c.$watch("isRequired",function(b){a.isRequired=b}),c.$watch("layout",function(b){a.layout=b}),c.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1}}}angular.module("sds-angular-controls").directive("formTimePicker",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{log:"@?",placeholder:"@?",toggleField:"@?",toggleSwitchType:"@?",onLabel:"@?",offLabel:"@?",style:"@?",type:"@",layoutCss:"@?",isReadonly:"=?"},templateUrl:"sds-angular-controls/form-directives/form-toggle.html",link:function(a,b){function c(){a.isReadonly&&"toggle"===a.fieldType&&(a.readOnlyModel=a.record[a.field])}var d=b.parent().scope();switch(d.$watch("record",function(b){a.record=b}),d.$watch("field",function(b){a.field=b}),d.$watch("isRequired",function(b){a.isRequired=b}),d.$watch("layout",function(b){a.layout=b}),d.$watch("isReadonly",function(b){a.isReadonly=b}),a.isReadonly=a.isReadonly||!1,a.log=a.log||!1,a.type=a.type||"text",a.toggleSwitchType=a.toggleSwitchType||"primary",a.onLabel=a.onLabel||"Yes",a.offLabel=a.offLabel||"No",a.layout){case"horizontal":a.layoutCss=a.layoutCss||"col-md-6";break;default:a.layoutCss=a.layoutCss||"col-md-4"}a.$watch("isReadonly",function(a,b){a!==b&&c()})}}}a.$inject=["$filter"],angular.module("sds-angular-controls").directive("formToggle",a)}(),function(){"use strict";function a(){return{restrict:"A",scope:{maskInput:"@"},link:function(a,b){a.maskInput&&$(b).mask(a.maskInput)}}}angular.module("sds-angular-controls").directive("maskInput",a)}(),function(){"use strict";function a(){return function(a){if(!a)return"";var b=a.toString().trim().replace(/^\+/,"");if(b.match(/[^0-9]/))return a;var c,d,e;switch(b.length){case 10:c=1,d=b.slice(0,3),e=b.slice(3);break;case 11:c=b[0],d=b.slice(1,4),e=b.slice(4);break;case 12:c=b.slice(0,3),d=b.slice(3,5),e=b.slice(5);break;default:return a}return 1===c&&(c=""),e=e.slice(0,3)+"-"+e.slice(3),(c+" ("+d+") "+e).trim()}}angular.module("sds-angular-controls").filter("phoneNumber",a)}(),function(){"use strict";function a(a){return{restrict:"E",require:"^dbGrid",scope:{api:"@",postParams:"=",filterBy:"="},link:function(b,c,d,e){function f(a){return a.charAt(0).toUpperCase()+a.slice(1)}function g(c,d,g,i,j,k){var l={page:i,pageSize:j,sort:[],filter:h(c,k)};return null!==d&&l.sort.push({field:f(d),direction:g?"":"desc"}),_.extend(l,b.postParams),a.post(b.api,l).then(function(a){return e.setTotal(a.data.total),a.data.tableData})}function h(a,b){var c={filters:[]},d=/^(\s*(\d+[-/]){2}[^-]*)-(\s*(\d+[-/]){2}[^-]*)$/;if("object"==typeof a){var e;c.logic="and",c.filters=_.reduce(b,function(a,b){return b.key&&b.filter&&"number"===b.type&&b.filter.indexOf("-")>0?(e=b.filter.split("-"),!e[0]&&e[1]&&(e.slice(0,1),e[0]*=-1),!e[1]&&e[2]&&(e.slice(1,1),e[1]*=-1),_.isNumber(e[0])&&_.isNumber(e[1])&&(a.push({fieldType:"decimal",fieldOperator:"gte",fieldValue:parseFloat(e[0]),field:f(b.key)}),a.push({fieldType:"decimal",fieldOperator:"lte",fieldValue:parseFloat(e[1]),field:f(b.key)}))):b.key&&b.filter&&"date"===b.type&&d.test(b.filter)?(e=d.exec(b.filter),moment(e[1]).isValid()&&moment(e[3]).isValid()&&(a.push({fieldType:"date",fieldOperator:"gte",fieldValue:e[0],field:f(b.key)}),a.push({fieldType:"date",fieldOperator:"lte",fieldValue:e[1],field:f(b.key)}))):b.key&&b.filter&&"number"===b.type?_.isNumber(b.filter)&&a.push({fieldType:"decimal",fieldOperator:"eq",fieldValue:parseFloat(b.filter),field:f(b.key)}):b.key&&b.filter&&"date"===b.type?moment(b.filter).isValid()&&a.push({fieldType:"date",fieldOperator:"eq",fieldValue:b.filter,field:f(b.key)}):b.key&&b.filter&&a.push({fieldType:"string",fieldOperator:"contains",fieldValue:b.filter,field:f(b.key)}),a},[])}else"string"==typeof a&&a&&(c.logic="or",c.filters=_.reduce(b,function(b,c){return c.key&&c.sortable&&"number"===c.type?_.isNumber(a)&&b.push({fieldType:"decimal",fieldOperator:"eq",fieldValue:parseFloat(a),field:f(c.key)}):c.key&&c.sortable&&"date"===c.type?moment(a).isValid()&&b.push({fieldType:"date",fieldOperator:"eq",fieldValue:a,field:f(c.key)}):c.key&&c.sortable&&b.push({fieldType:"string",fieldOperator:"contains",fieldValue:a,field:f(c.key)}),b},[]));return c}e.setDataSource(g)}}}a.$inject=["$http"],angular.module("sds-angular-controls").directive("dbApiVelocity",a)}(),function(){"use strict";function a(a){return{restrict:"A",link:function(b,c){if("function"==typeof b._col.template)c.append(b._col.template(b));else if(!angular.element.trim(c.html())){var d=angular.element("<span>"+b._col.template+"</span>"),e=a(d);c.append(d),e(b),c.data("compiled",e)}}}}function b(){return{restrict:"EAC",link:function(a,b,c,d,e){e(function(c,d){b.empty(),d.$grid=a.$grid,b.append(c)})}}}a.$inject=["$compile"],angular.module("sds-angular-controls").directive("dbBindCell",a).directive("dbTransclude",b)}(),function(){"use strict";function a(a){return{restrict:"E",require:"^dbGrid",compile:function(b){var c=b.html().trim();return b.empty(),function(b,d,e,f){var g=null;!c&&e.key&&(c="{{"+b.$parent._model.rowName+"."+e.key+"}}"),g="true"===e.bind?c:a(c);var h={filter:e.filter,width:e.width,key:e.key,label:e.label,sortable:"false"===e.sortable?!1:!!e.key,type:e.type,bind:"true"===e.bind,template:g};f.addColumn(h),void 0!==e.filter&&e.$observe("filter",function(a,b){a!=b&&(h.filter=a,f.refresh())})}}}}a.$inject=["$interpolate"],angular.module("sds-angular-controls").directive("dbCol",a)}(),function(){"use strict";function a(a,b,c){return{restrict:"E",replace:!0,transclude:!0,scope:!0,templateUrl:"sds-angular-controls/table-directives/db-grid.html",compile:function(a,b){var c=b["for"].split(" ");return 1!==c.length&&"in"!=c[1]?void console.error("Invalid loop"):void a.find("tbody > tr").attr("ng-repeat",c[0]+" in _model.filteredItems")},controller:["$scope","$element","$attrs",function(d,e,f){function g(a,b,e,f,g){var h=c.defer(),i=m(l(d._model.items,a),b,!e);return d._model.total=i?i.length:0,h.resolve(n(i,f,g)),h.promise}function h(a){d._model.sort===a?d._model.sortAsc=!d._model.sortAsc:d._model.sort=a}function i(){_.each(d._model.cols,function(a){a.filter=""}),d._model.refresh()}function j(){console.log("enter"),1===d._model.items.length&&b(function(){e.find("tbody tr a:first").click()})}function k(){b(function(){d._model.getItems(d._model.showAdvancedFilter?d._model.cols:d._model.filterText,null!==d._model.sort?d._model.cols[d._model.sort].key:null,d._model.sortAsc,d._model.currentPage-1,d._model.pageSize,d._model.cols).then(function(a){d._model.filteredItems=a})})}var l=a("complexFilter"),m=a("orderBy"),n=a("page");d._model={label:f.label,layoutCss:f.layoutCss,currentPage:1,total:0,sortAsc:f.sort?"-"!==f.sort[0]:!0,sort:null,filterText:"",showAdvancedFilter:!1,pageSize:f.pageSize?parseInt(f.pageSize,10):25,filterType:(f.filter||"advanced").toLowerCase(),cols:[],items:[],filteredItems:[],getItems:g,toggleSort:h,clearFilters:i,onEnter:j,refresh:_.debounce(k,250)},d.$grid={refresh:function(){console.log("hard refresh"),d._model.currentPage=1,d._model.filteredItems=[],b(k)},items:function(){return d._model.filteredItems}};var o=f["for"].split(" ");d._model.rowName=o[0],o[2]&&d.$watchCollection(o.slice(2).join(" "),function(a){d._model.items=a,d._model.refresh()}),this.addColumn=function(a){var b=f.sort||"";("-"===b[0]||"+"===b[0])&&(b=b.slice(1)),b&&b===a.key&&null===d._model.sort&&(d._model.sort=d._model.cols.length),d._model.cols.push(a)},this.setDataSource=function(a){d._model.getItems=a,d._model.refresh()},this.setTotal=function(a){d._model.total=a},this.refresh=function(){d._model.items&&d.$grid.refresh()},d.$watch("_model.currentPage",d._model.refresh),d.$watch("_model.sort",d._model.refresh),d.$watch("_model.sortAsc",d._model.refresh),d.$watch("_model.filterText",d._model.refresh)}]}}a.$inject=["$filter","$timeout","$q"],angular.module("sds-angular-controls").directive("dbGrid",a)}(),angular.module("sds-angular-controls").run(["$templateCache",function(a){"use strict";a.put("sds-angular-controls/form-directives/form-autocomplete.html",'<div> <select ng-if="!isReadonly && !hasFilter" ng-readonly="isReadonly" ng-required="isRequired" name="{{::field}}" selectize="options" options="items" ng-model="record[field]"></select> <!-- optionValue as optionLabel for arrayItem in array --> <input ng-if="isReadonly" style="{{::style}}" ng-readonly="isReadonly" type="text" class="form-control inputField {{::inputLayoutCss}}" ng-model="readOnlyModel"> <div ng-if="log"> form-input value: {{record[field]}}<br> {{isRequired}} </div> </div>'),a.put("sds-angular-controls/form-directives/form-datepicker.html",'<span> <span class="input-group"> <input type="text" style="{{::style}}" class="form-control datepicker" class="{{layout !== \'horizontal\' ? layoutCss : \'\'}}" ng-if="!isReadonly" ng-readonly="isReadonly" placeholder="{{placeholder}}" ng-model="record[field]" ng-required="::isRequired" min-date="::min" max-date="::max" datepicker-popup="{{::dateFormat}}" is-open="calendar.opened"> <span ng-if="!isReadonly" class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </span> <div ng-if="log"> form-datepicker value: {{record[field]}}<br> {{isRequired}} </div> </span>'),a.put("sds-angular-controls/form-directives/form-field.html","<div> <script type=\"text/ng-template\" id=\"validation.html\"><div ng-if=\"!hideValidationMessage\" class='has-error' ng-show='showError({{field}})'\n             ng-messages='{{field}}.$error'>\n            <span class='control-label' ng-message='required'> {{ validationFieldName }} is required. </span>\n            <span class='control-label' ng-message='text'> {{ validationFieldName }} should be text. </span>\n            <span class='control-label' ng-message='integer'> {{ validationFieldName }} should be an integer. </span>\n            <span class='control-label' ng-message='email'> {{ validationFieldName }} should be an email address. </span>\n            <span class='control-label' ng-message='date'> {{ validationFieldName}} should be a date. </span>\n            <span class='control-label' ng-message='datetime'> {{ validationFieldName }} should be a datetime. </span>\n            <span class='control-label' ng-message='time'> {{ validationFieldName }} should be a time. </span>\n            <span class='control-label' ng-message='month'> {{ validationFieldName }} should be a month. </span>\n            <span class='control-label' ng-message='week'> {{ validationFieldName }} should be a week. </span>\n            <span class='control-label' ng-message='url'> {{ validationFieldName }} should be an url. </span>\n            <span class='control-label' ng-message='zip'> {{ validationFieldName }} should be a valid zipcode. </span>\n            <span class='control-label' ng-message='number'>{{ validationFieldName }} must be a number</span>\n            <span class='control-label' ng-message='tel'>{{ validationFieldName }} must be a phone number</span>\n            <span class='control-label' ng-message='color'>{{ validationFieldName }} must be a color</span>\n            <span class='control-label' ng-message='min'> {{ validationFieldName }} must be at least {{min}}. </span>\n            <span class='control-label' ng-message='max'> {{ validationFieldName }} must not exceed {{max}} </span>\n            <span class='control-label' ng-repeat='(k, v) in types' ng-message='{{k}}'> {{ validationFieldName }}{{v[1]}}</span>\n"+'        </div></script> <div ng-if="layout === \'stacked\'" class="row"> <div class="form-group clearfix" ng-form="{{field}}" ng-class="{ \'has-error\': showError({{field}}) }"> <div class="{{::layoutCss}}"> <label ng-if="showLabel" class="control-label {{labelCss}}"> {{ label }} <span ng-if="isRequired && !isReadonly">*</span></label> <ng-transclude></ng-transclude> <div ng-if="showDefault"><form-input></form-input></div> <!-- validation --> <div class="pull-left" ng-include="\'validation.html\'"></div> </div> </div> </div> <div ng-if="layout === \'horizontal\'" class="row"> <div class="form-group clearfix" ng-form="{{field}}" ng-class="{ \'has-error\': showError({{field}}) }"> <label ng-if="showLabel" class="control-label {{labelCss}}"> {{ label }} <span ng-if="isRequired && !isReadonly">*</span></label> <ng-transclude></ng-transclude> <div ng-if="showDefault"><form-input></form-input></div> <!-- validation --> <div ng-if="!hideValidationMessage" ng-show="showError({{field}})" class="popover validation right alert-danger" style="display:inline-block; top:auto; left:auto; margin-top:-4px; min-width:240px"> <div class="arrow" style="top: 20px"></div> <div class="popover-content" ng-include="\'validation.html\'"> </div> </div> </div> </div> <div ng-if="layout !== \'stacked\' && layout !== \'horizontal\'" ng-form="{{field}}" ng-class="{ \'has-error\': showError({{field}}) }"> <ng-transclude></ng-transclude> <div ng-if="showDefault"><form-input></form-input></div> </div> </div>'),a.put("sds-angular-controls/form-directives/form-input.html",'<div> <div class="{{layout === \'horizontal\' ? inputLayout : \'\' }}"> <input class="form-control inputField {{layout !== \'horizontal\' ? layoutCss : \'\'}}" ng-model="record[field]" name="{{::field}}" type="{{::type}}" ng-required="isRequired" ng-disabled="isReadonly" placeholder="{{::placeholder}}" max="{{::max}}" min="{{::min}}" step="{{::step}}" pattern="{{::pattern}}" style="{{::style}}" mask-input="{{mask}}"> <div ng-if="::(rightLabel && rightLabel.length > 0)" class="rightLabel">{{::rightLabel}}</div> <div ng-if="log"> form-input value: {{record[field]}}<br> {{isRequired}} </div> </div> </div>'),a.put("sds-angular-controls/form-directives/form-numeric-input.html",'<div> <div class="{{layout === \'horizontal\' ? layoutCss : \'\' }}"> <input class="form-control inputField {{layout !== \'horizontal\' ? layoutCss : \'\'}}" ng-model="record[field]" type="text" name="{{::field}}" ng-required="isRequired" ng-disabled="isReadonly" placeholder="{{::placeholder}}" max="{{::max}}" min="{{::min}}" step="any" style="{{::style}}" mask-input="{{::mask}}" auto-numeric> <div ng-if="::(rightLabel && rightLabel.length > 0)" class="rightLabel">{{::rightLabel}}</div> <div ng-if="log"> form-input value: {{record[field]}}<br> {{isRequired}} </div> </div> </div>'),a.put("sds-angular-controls/form-directives/form-select.html",'<div> <select ng-if="!isReadonly && !hasFilter" ng-readonly="isReadonly" class="form-control" name="{{::field}}" ng-model="record[field]" ng-options="convertType(key) as items[key] for key in orderHash(items)" ng-required="isRequired"></select> <!-- optionValue as optionLabel for arrayItem in array --> <input ng-if="isReadonly" style="{{::style}}" ng-readonly="isReadonly" type="text" class="form-control inputField {{::inputLayoutCss}}" ng-model="readOnlyModel"> <div ng-if="log"> form-input value: {{record[field]}}<br> {{isRequired}} </div> </div>'),a.put("sds-angular-controls/form-directives/form-text-area.html",'<div> <div class="{{layout === \'horizontal\' ? layoutCss : \'\' }}"> <textarea class="form-control inputField {{layout !== \'horizontal\' ? layoutCss : \'\'}}" ng-model="record[field]" type="{{::type}}" name="{{::field}}" ng-required="isRequired" ng-disabled="isReadonly" style="{{::style}}">\n\n        <div ng-if="log">\n            form-input value: {{record[field]}}<br>\n            {{isRequired}}\n        </div>\n\n    </div>\n</div>'),a.put("sds-angular-controls/form-directives/form-text-toggle.html",'<div class="text-toggle"> <input type="text" ng-readonly="isReadonly" type="{{::type}}" class="form-control inputField" ng-required="isRequired" ng-model="record[field]"> <!-- bug in toggle where setting any disabled makes it disabled - so needing an if here --> <toggle-switch ng-if="isReadonly" is-disabled="true" class="{{::toggleSwitchType}}" ng-model="record[toggleField]" on-label="{{::onLabel}}" off-label="{{::offLabel}}"> </toggle-switch> <toggle-switch ng-if="!isReadonly" class="{{::toggleSwitchType}}" ng-model="record[toggleField]" on-label="{{::onLabel}}" off-label="{{::offLabel}}"> </toggle-switch> </div>'),a.put("sds-angular-controls/form-directives/form-time-picker.html",'<div class="{{::layoutCss}} timepicker"> <timepicker ng-model="record[field]" ng-required="::isRequired" ng-if="!isReadonly" minute-step="5"></timepicker> </div>'),a.put("sds-angular-controls/form-directives/form-toggle.html",'<div> <!-- bug in toggle where setting any disabled makes it disabled - so needing an if here --> <toggle-switch ng-if="isReadonly" style="{{::style}}" is-disabled="true" class="{{::toggleSwitchType}}" ng-model="record[field]" on-label="{{::onLabel}}" off-label="{{::offLabel}}"> </toggle-switch> <toggle-switch ng-if="!isReadonly" style="{{::style}}" class="{{::toggleSwitchType}}" ng-model="record[field]" on-label="{{::onLabel}}" off-label="{{::offLabel}}"> </toggle-switch> <div ng-if="log"> form-input value: {{record[field]}}<br> </div> </div>'),a.put("sds-angular-controls/table-directives/db-grid.html",'<div class="table-responsive"> <div class="btn-toolbar"> <a ng-if="_model.showAdvancedFilter" href="" class="btn btn-default" ng-click="_model.clearFilters()">Clear All Filters <span class="big-x">&times;</span></a> <div ng-if="!_model.showAdvancedFilter && _model.filterType !== \'none\'" class="toolbar-input"> <div class="form-group has-feedback"> <input class="form-control" type="text" ng-model="_model.filterText" placeholder="Filter {{_model.label || \'items\'}}" on-enter="_model.onEnter()"> <a href="" ng-click="_model.filterText = \'\'" class="form-control-feedback feedback-link">&times;</a> </div> </div> <a href="" ng-if="_model.filterType === \'advanced\'" class="btn btn-default" ng-class="{active: _model.showAdvancedFilter}" ng-click="_model.showAdvancedFilter = !_model.showAdvancedFilter">{{_model.showAdvancedFilter ? \'Simple\' : \'Advanced\'}} Filtering</a> <db-transclude></db-transclude> <p ng-if="_model.total && _model.label"><i>{{_model.total}} {{_model.label}}</i></p> </div> <table class="table db-grid table-hover {{_model.layoutCss}}"> <thead> <tr> <th ng-repeat="_col in _model.cols" ng-style="{width: _col.width}"> <div ng-if="_model.showAdvancedFilter && _col.sortable"> <input type="text" class="form-control filter-input" on-enter="_model.onEnter()" ng-keyup="$grid.refresh()" ng-model="_col.filter" placeholder="Filter {{::_col.label || _col.key}}" tooltip="{{_col.type ? \'Use a dash (-) to specify a range\' : \'\'}}" tooltip-trigger="focus" tooltip-placement="top"> </div> <a href="" ng-if="::_col.sortable" ng-click="_model.toggleSort($index)">{{::_col.label || (_col.key | labelCase) }} <i class="fa" ng-class="{\n                         \'fa-sort\'     : _model.sort !== $index,\n                         \'fa-sort-down\': _model.sort === $index &&  _model.sortAsc,\n                         \'fa-sort-up\'  : _model.sort === $index && !_model.sortAsc\n                         }"></i> </a> <span ng-if="::!_col.sortable"> {{::_col.label || (_col.key | labelCase)}} </span>    <tbody> <tr> <td ng-repeat="_col in _model.cols" db-bind-cell>   </table> <pagination ng-if="_model.total > _model.pageSize" total-items="_model.total" items-per-page="_model.pageSize" max-size="10" rotate="false" ng-model="_model.currentPage"></pagination> </div>')}]);
//# sourceMappingURL=sds-angular-controls.min.js.map